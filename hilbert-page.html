<!doctype html><html lang="zh-hant-tw">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Filling Space</title>

	<script>
		function hilbertCurve(order) {
			const colors = ["violet", "indigo", "green", "blue",
				"orange", "yellow", "red"];
			const canvas = document.getElementById("myCanvas");
			const size = canvas.width < canvas.height ?
				canvas.width : canvas.height;
			const cxt = canvas.getContext("2d");

			cxt.lineWidth = 2;

			function curve(cx, cy, size, order, angle) {
				cxt.save();
				cxt.translate(cx, cy);  // set the center of rotation
				cxt.rotate(angle);

				if (order > 1) {
					curve(-(size / 4), -(size / 4),
						size / 2, order - 1, 0);
					curve(size / 4, -(size / 4),
						size / 2, order - 1, 0);
					curve(-(size / 4), size / 4, 
						size / 2, order - 1, Math.PI / 2);
					curve(size / 4, size / 4,
						size / 2, order - 1, -(Math.PI / 2));
				}

				cxt.beginPath();

				const u = size / Math.pow(2, order + 1);
				const v = size / 2 - u;

				cxt.moveTo(-u, -u);  // top horizontal bar
				cxt.lineTo(u, -u);
				cxt.moveTo(-v, -u);  // left vertical bar
				cxt.lineTo(-v, u);
				cxt.moveTo(v, -u);  // right vertical bar
				cxt.lineTo(v, u);

				cxt.strokeStyle = colors[(order - 1) % colors.length];
				cxt.stroke();
				cxt.restore();
			}

			curve(size / 2, size / 2, size, order, 0);
		}
	</script>
</head>

<body>
	<h3>The Hilbert Space-Filling Curve of Order 7</h3>
	<canvas id="myCanvas" width="768" height="768"
		style="border: 1px solid lightgray;">
		This space is meant to be filled as full as possible.
	</canvas>

	<script>
		hilbertCurve(7);
	</script>
</body></html>
