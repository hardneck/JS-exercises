<!DOCTYPE html><html lang="zh-Hant-TW">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Koch Curve</title>

	<script>
		function curve(px, py, size, order, color) {

			function f_(x0, y0, size, order, angle) {
				cxt.save();
				cxt.translate(x0, y0);
				cxt.rotate(angle);

				if (order == 0) {
					cxt.moveTo(0, 0);
					cxt.lineTo(size, 0);
				}
				else {
					f_(0, 0,
						size / 3, order - 1, 0);
					f_(size / 3 , 0,
						size / 3, order - 1, -(Math.PI / 3));
					f_(size / 2 , -((size / 3) * Math.sin(Math.PI / 3)),
						size / 3, order - 1, Math.PI / 3);
					f_(2 * (size / 3), 0,
						size / 3, order - 1, 0);
				}

				cxt.restore();
			}

			cxt.beginPath();
			f_(px, py, size, order, 0);
			cxt.lineWidth = 1;
			cxt.strokeStyle = color;
			cxt.stroke();

			cxt.font = "12px monospace";
			cxt.textAlign = "center";  // horizontal alignment
			cxt.textBaseline = "middle";  // vertical alignment
			cxt.fillText("Koch", 10, 10);
		}

		function drawIt(x0, y0, size, order, color) {
			cxt.save();
			cxt.translate(x0, y0);

			const x1 = -(size / 2);
			const y1 = -((size / 3) * Math.sin(Math.PI / 3));

			curve(x1, y1, size, order, color);
			cxt.rotate(2 * (Math.PI / 3));
			curve(x1, y1, size, order, color);
			cxt.rotate(2 * (Math.PI / 3));
			curve(x1, y1, size, order, color);

			cxt.restore();
		}
	</script>
</head>

<body>
   	<h3>Koch Curve</h3>
	<canvas id="myCanvas" width="800" height="600"
		style="border: 1px solid lightgray;"></canvas>

	<script>
		const canvas = document.getElementById("myCanvas");
		const cxt = canvas.getContext("2d");

		drawIt(400, 380, 360, 4, "red");
		drawIt(150, 150, 210, 2, "violet");
		drawIt(690, 310, 180, 3, "green");
		drawIt(520, 100, 120, 2, "blue");
		drawIt(370, 100, 120, 1, "teal");
		drawIt(670, 100, 120, 3, "orange");
		drawIt(100, 370, 150, 3, "steelblue");
		drawIt(700, 490, 120, 0, "crimson");
		drawIt(150, 520, 90, 2, "purple");
	</script>
</body></html>
