<!doctype html><html lang="zh-hant-tw">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sierpiński Triangle</title>

	<style>
		body {
			text-align: center;
			font-family: serif;
		}

		#myCanvas {
			padding: 14px;
			background-color: lightgray;
		}

		#result {
			font-size: 14px;
			color: white;
			background-color: steelblue;
			padding: 3px;
			border-radius: 2px;
		}
	</style>

	<script>
		function curve(width, height, px, py, order) {
			if (order == 0) {
				cxt.beginPath();
				cxt.moveTo(px, py);
				cxt.lineTo(px - width / 2, py + height);
				cxt.lineTo(px + width / 2, py + height);
				cxt.lineTo(px, py);
				cxt.strokeStyle = myDisplay();
				cxt.stroke();
			}
			else {
				curve(width / 2, height / 2,
					px, py, order - 1);
				curve(width / 2, height / 2,
					px - width / 4, py + height / 2, order - 1);
				curve(width / 2, height / 2,
					px + width / 4, py + height / 2, order - 1);
			}
		}
	</script>
</head>

<body>
	<p>Sierpiński Triangle of Order 6</p>
	<canvas id="myCanvas" width="776" height="584"
		style="border: 1px solid #666; border-radius: 2px;"></canvas>
	<p><span id="result">Number of drawn triangles: </span></p>

	<script>
		const canvas = document.getElementById("myCanvas");
		const cxt = canvas.getContext("2d");  // 2D rendering context

		const myDisplay = (function () {
			let count = 0;
			const palette = ["red", "orange", "yellow", "green", "blue",
				"indigo", "violet"];
			const length = palette.length;

			return function () {
				const i = count % length;
				count = count + 1;
				return palette[i];
			};
		})();

		cxt.lineCap = "round";
		cxt.lineWidth = 3;
		cxt.translate(4, 4);

		curve(canvas.width - 8, canvas.height - 8,
			(canvas.width - 8) / 2, 0, 6);

		const result = document.getElementById("result");
		result.innerHTML = result.innerHTML + count;
	</script>
</body></html>
